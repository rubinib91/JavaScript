<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problems of Environment</title>
    <link rel="stylesheet" href="./assets/styles/style.css">
</head>

<body>
    <div class="mainform" id="mainform">
        <form id="myform" class="myform">
            <div class="info">
                <label>Enter your Name</label>
                <input id="name" type="text" placeholder="Enter name">
            </div>

            <div class="info">
                <label>Enter your Mobile No</label>
                <input id="mobile" type="tel" placeholder="Enter 10 digits">
            </div>

            <div class="info">
                <label>Enter the Problem</label>
                <input id="problem" type="text" placeholder="Enter the problem">
            </div>

            <div class="info">
                <label>Where it Happens(city)</label>
                <input id="city" type="text" placeholder="Enter city">
            </div>

            <div class="info">
                <label>Review the Problem</label>
                <textarea required id="review" style="width: 100px;height: 50px; width: 300px;"></textarea>
            </div>
            <div class="data">
                <button id="btn" type="submit"
                    style="background-color: black;color: white;height: 50px;width: 80px ;">Submit</button>
            </div>
            <p id="display"></p>
        </form>
    </div>

    <script>

        const form = document.getElementById("myform")
        const infodisplay = document.getElementById("display")
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            const username = document.getElementById("name").value
            const mobile = document.getElementById("mobile").value
            const problem = document.getElementById("problem").value
            const place = document.getElementById("city").value
            const review = document.getElementById("review").value
            console.log(username,mobile,problem,place,review);
            

            if (!username || !mobile || !problem || !place || !review) {
                infodisplay.innerText = "Please fill all the mandatory fields";
                infodisplay.style.color = "red";
                return;
            }

            if (mobile.length !== 10) {
                infodisplay.innerText = "Mobile number must be in 10 digits";
                 infodisplay.style.color = "blue";
                return;
            }

            const data = JSON.parse(localStorage.getItem("forminfo")) || [];
            console.log(data);
            const storeinfo = { username, mobile, place, problem, review }
            console.log(storeinfo);
            data.push(storeinfo);
            localStorage.setItem("forminfo", JSON.stringify(data));
            alert("Successfully submitted")
            form.reset();
            window.location.href = "table.html"
        })
    </script>
</body>
</html>